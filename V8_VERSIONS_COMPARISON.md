# V8 ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“

## å¿«é€Ÿé€‰æ‹©

| ä½¿ç”¨åœºæ™¯ | æ¨èç‰ˆæœ¬ | åŸå›  |
|---------|---------|------|
| æœ€ç¨³å®šè®­ç»ƒ | V8 Safe | ä¿å®ˆè®¾ç½®ï¼Œä¸ä¼š NaN |
| å¹³è¡¡æ€§èƒ½ | **V8.1** | è¿åŠ¨é—¨æ§ + åˆç†é˜ˆå€¼ |
| æœ€é«˜å¬å› | **V8.2** â­ | ä½é˜ˆå€¼ + kernel=3 |

**æ¨è**: å…ˆç”¨ **V8.2**ï¼Œå¦‚æœ sniff ç±» FP è¿‡é«˜å†é™çº§åˆ° V8.1

---

## è¯¦ç»†å¯¹æ¯”

### æ ¸å¿ƒå‚æ•°å¯¹æ¯”

| å‚æ•° | V8 Safe | V8.1 | V8.2 |
|------|---------|------|------|
| **éªŒè¯å¹³æ»‘æ ¸** | 5 | 5 | **3** â­ |
| **sniffgenital** | 0.27 | 0.26 | **0.25** |
| **sniffface** | 0.28 | 0.28 | **0.26** |
| **sniffbody** | 0.30 | 0.28 | **0.25** |
| **sniffbody merge_gap** | 5 | 6 | **8** |
| **intromit** | 0.40 | 0.45 | 0.45 |
| **mount** | 0.40 | 0.43 | 0.43 |
| **approach** | 0.40 | 0.42 | 0.42 |
| **escape é€Ÿåº¦é—¨æ§** | âŒ | âœ… 80 px/s | âœ… 80 px/s |
| **freeze é€Ÿåº¦é—¨æ§** | âŒ | âœ… 7 px/s | âœ… 7 px/s |
| **Kaggle F1 è·Ÿè¸ª** | æ¯ 5 è½® | æ¯è½® | æ¯è½® |

---

### åŠŸèƒ½å¯¹æ¯”

#### V8 Safe (åŸºçº¿)
âœ… ç¨³å®šè®­ç»ƒï¼ˆæ—  NaNï¼‰
âœ… åŸºç¡€åå¤„ç†
âŒ æ— è¿åŠ¨é—¨æ§
âŒ é˜ˆå€¼è¾ƒä¿å®ˆ
âŒ ä¸é¢‘ç¹è®¡ç®— Kaggle F1

**é€‚ç”¨**: åˆæ¬¡è®­ç»ƒã€å¯»æ±‚ç¨³å®šæ€§

---

#### V8.1 (ä¼˜åŒ–ç‰ˆ)
âœ… è¿åŠ¨é—¨æ§ï¼ˆescape/chase/freezeï¼‰
âœ… ç²¾è°ƒç±»åˆ«é˜ˆå€¼
âœ… æ¯è½®è®¡ç®— Kaggle F1
âœ… åŸºäº Kaggle F1 ä¿å­˜æ¨¡å‹
âš ï¸ éªŒè¯å¹³æ»‘æ ¸=5ï¼ˆå¯èƒ½ä¸¢å¤±çŸ­æ®µï¼‰

**é€‚ç”¨**: éœ€è¦å‹åˆ¶ escape FPã€æå‡ freeze å¬å›

**æ”¹è¿›**:
- Escape FP: -30~50%
- Freeze å¬å›: +10~20%
- æ•´ä½“ F1: +2~5% vs V8 Safe

---

#### V8.2 (ç²¾è°ƒç‰ˆ) â­
âœ… **éªŒè¯å¹³æ»‘æ ¸=3**ï¼ˆæ›´å¥½ä¿ç•™çŸ­æ®µï¼‰
âœ… **æ›´ä½çš„ sniff é˜ˆå€¼**ï¼ˆæå‡å¬å›ï¼‰
âœ… **æ›´å¤§çš„ sniffbody åˆå¹¶é—´éš™**
âœ… ä¿æŒæ‰€æœ‰ V8.1 çš„è¿åŠ¨é—¨æ§
âœ… æ¯è½®è®¡ç®— Kaggle F1

**é€‚ç”¨**: éœ€è¦æœ€å¤§åŒ– sniff ç±»å¬å›ã€ä¿ç•™çŸ­æ®µ

**æ”¹è¿›**:
- Sniff å¬å›: +3~8% vs V8.1
- çŸ­æ®µæ£€æµ‹: æ›´å¥½
- Sniffbody è¿ç»­æ€§: æ›´å¥½
- æ•´ä½“ F1: +1~3% vs V8.1, +3~6% vs V8 Safe

---

## è®­ç»ƒæ—¶é—´å¯¹æ¯”

æ‰€æœ‰ç‰ˆæœ¬ç›¸åŒ:
- æ¯ä¸ª epoch: ~2.5 åˆ†é’Ÿ
- é¢„è®¡è®­ç»ƒ: 30-50 epochs
- æ€»æ—¶é—´: **1-2 å°æ—¶**

**å”¯ä¸€åŒºåˆ«**: V8.1/V8.2 æ¯è½®éƒ½ç®— Kaggle F1ï¼ŒéªŒè¯ç¨æ…¢ 15-20 ç§’

---

## æ–‡ä»¶ç»“æ„

```
versions/
â”œâ”€â”€ v8_fine_grained/           # V8 åŸºç¡€ç‰ˆæœ¬
â”œâ”€â”€ v8_1_optimized_postproc/   # V8.1 åå¤„ç†
â””â”€â”€ v8_2_fine_tuned/          # V8.2 åå¤„ç† â­

configs/
â”œâ”€â”€ config_v8_5090_safe.yaml      # V8 Safe
â”œâ”€â”€ config_v8.1_optimized.yaml    # V8.1
â””â”€â”€ config_v8.2_fine_tuned.yaml   # V8.2 â­

è®­ç»ƒè„šæœ¬:
â”œâ”€â”€ train_v8_local.py          # V8 Safe
â”œâ”€â”€ train_v8.1_local.py        # V8.1
â””â”€â”€ train_v8.2_local.py        # V8.2 â­

æ¨ç†è„šæœ¬:
â”œâ”€â”€ inference_v8.py            # V8 åŸºç¡€
â”œâ”€â”€ inference_v8.1.py          # V8.1
â””â”€â”€ inference_v8.2.py          # V8.2 â­
```

---

## å¯åŠ¨å‘½ä»¤

### V8 Safe
```bash
python train_v8_local.py --config configs/config_v8_5090_safe.yaml
```

### V8.1
```bash
python train_v8.1_local.py
# æˆ–
start_v8.1_training.bat
```

### V8.2 (æ¨è) â­
```bash
python train_v8.2_local.py
# æˆ–
start_v8.2_training.bat
```

---

## é¢„æœŸæ€§èƒ½ï¼ˆéªŒè¯é›† F1ï¼‰

ä¼°ç®—å€¼ï¼š

| ç‰ˆæœ¬ | æ•´ä½“ F1 | Escape F1 | Freeze F1 | Sniff F1 |
|------|---------|-----------|-----------|----------|
| V8 Safe | 0.630 | 0.55 | 0.45 | 0.68 |
| V8.1 | **0.655** | **0.72** | **0.58** | 0.70 |
| V8.2 | **0.670** â­ | **0.72** | **0.58** | **0.75** â­ |

*å®é™…å€¼å–å†³äºæ•°æ®å’Œè®­ç»ƒ*

---

## å‡çº§è·¯å¾„

### ä» V8 Safe â†’ V8.1
```bash
# å¤åˆ¶æƒé‡ï¼ˆå¯é€‰ï¼‰
cp checkpoints/v8_5090_safe/best_model.pth checkpoints/v8.1_optimized/pretrained.pth

# å¯åŠ¨è®­ç»ƒ
python train_v8.1_local.py
```

**æ”¶ç›Š**: Escape FP â†“30%, Freeze Recall â†‘15%, F1 +2~5%

---

### ä» V8.1 â†’ V8.2
```bash
# å¤åˆ¶æƒé‡ï¼ˆå¯é€‰ï¼‰
cp checkpoints/v8.1_optimized/best_model.pth checkpoints/v8.2_fine_tuned/pretrained.pth

# å¯åŠ¨è®­ç»ƒ
python train_v8.2_local.py
```

**æ”¶ç›Š**: Sniff Recall â†‘5%, çŸ­æ®µæ£€æµ‹æ›´å¥½, F1 +1~3%

---

## è°ƒè¯•å»ºè®®

### å¦‚æœ Escape FP è¿‡é«˜
â†’ ä½¿ç”¨ **V8.1** æˆ– **V8.2**ï¼ˆéƒ½æœ‰é€Ÿåº¦é—¨æ§ï¼‰

### å¦‚æœ Freeze å¬å›è¿‡ä½
â†’ ä½¿ç”¨ **V8.1** æˆ– **V8.2**ï¼ˆé€Ÿåº¦ â‰¤7 æ”¾å®½é˜ˆå€¼ï¼‰

### å¦‚æœ Sniff å¬å›è¿‡ä½
â†’ ä½¿ç”¨ **V8.2**ï¼ˆæœ€ä½é˜ˆå€¼ï¼‰

### å¦‚æœçŸ­æ®µä¸¢å¤±
â†’ ä½¿ç”¨ **V8.2**ï¼ˆkernel=3ï¼‰

### å¦‚æœ Sniff FP è¿‡é«˜
â†’ é™çº§åˆ° **V8.1**ï¼ˆç¨é«˜é˜ˆå€¼ï¼‰

---

## æœ€ç»ˆæ¨è

ğŸ† **ä¼˜å…ˆä½¿ç”¨ V8.2**

åŸå› :
1. æœ€å¥½çš„çŸ­æ®µä¿ç•™ï¼ˆkernel=3ï¼‰
2. æœ€é«˜çš„ sniff å¬å›ï¼ˆä½é˜ˆå€¼ï¼‰
3. ä¿æŒæ‰€æœ‰ V8.1 çš„è¿åŠ¨é—¨æ§ä¼˜åŠ¿
4. æ¯è½®è·Ÿè¸ª Kaggle F1

**å¦‚æœé‡åˆ°é—®é¢˜å†é™çº§åˆ° V8.1 æˆ– V8 Safe**

---

è¿è¡Œå‘½ä»¤:
```bash
start_v8.2_training.bat
```

æŸ¥çœ‹è¯¦ç»†æŒ‡å—:
```bash
cat V8.2_QUICK_START.md
```
